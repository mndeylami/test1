"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Condition_1 = require("../Condition");
const timers_1 = require("timers");
/**
 * TODO: Generalize waitFor such that we can avoid needing waitForEvent custom
 * handler.
 */
class DialogCondition extends Condition_1.Condition {
    constructor() {
        super(...arguments);
        this.hasWaitFor = false;
    }
    toString() {
        return 'waiting for dialog to appear';
    }
    async waitFor(frame) {
        return true;
    }
    async waitForEvent(page) {
        return new Promise((yeah, nah) => {
            let timeout = setTimeout(nah, this.timeout);
            page.once('dialog', (dialog) => {
                timers_1.clearTimeout(timeout);
                yeah(dialog);
            });
        });
    }
}
exports.DialogCondition = DialogCondition;
