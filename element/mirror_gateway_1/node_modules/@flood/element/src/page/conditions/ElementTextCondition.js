"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Condition_1 = require("../Condition");
class ElementTextCondition extends Condition_1.ElementCondition {
    constructor(desc, locator, ...args) {
        super(desc, locator);
        this.pageFunc = (node, expectedText, partial = false) => {
            if (!node)
                return false;
            if (!node.textContent)
                return false;
            let text = node.textContent.trim();
            if (typeof expectedText === 'string') {
                if (expectedText.startsWith('/') && expectedText.endsWith('/')) {
                    // RegExp
                    let exp = new RegExp(expectedText.slice(1, expectedText.length - 1));
                    return exp.test(text);
                }
                else {
                    return (partial && text.indexOf(expectedText) !== -1) || text === expectedText;
                }
            }
            return false;
        };
        this.pageFuncArgs = args;
    }
    toString() {
        return `waiting for element text to equal "${this.pageFuncArgs[0]}"`;
    }
}
exports.ElementTextCondition = ElementTextCondition;
